<?xml version="1.0"?>
<ruleset name="PHPCS"
         xmlns="http://pmd.sf.net/ruleset/1.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://pmd.sf.net/ruleset/1.0.0 http://pmd.sf.net/ruleset_xml_schema.xsd"
         xsi:noNamespaceSchemaLocation="http://pmd.sf.net/ruleset_xml_schema.xsd">
    <description>PHPCS</description>
    <exclude-pattern>*.phtml</exclude-pattern>
    <exclude-pattern>./magento-vars.php</exclude-pattern>
    <exclude-pattern>./app/etc/registration_globlist.php</exclude-pattern>
    <exclude-pattern>./app/etc/NonComposerComponentRegistration.php</exclude-pattern>
    <exclude-pattern>./app/etc/config.php</exclude-pattern>
    <exclude-pattern>.ddev/*</exclude-pattern>
    <exclude-pattern>./env-dev.php</exclude-pattern>
    <exclude-pattern>./deploy.php</exclude-pattern>
    <exclude-pattern>./pub/sgtm.php</exclude-pattern>
    <exclude-pattern>./tests/*</exclude-pattern>

    <!-- Yes, 2 rule ref's is allowed -->
    <rule ref="../default/phpcs.xml">
        <exclude name="Squiz.CSS.NamedColours" />
    </rule>
    <rule ref="Magento2">
        <exclude name="Magento2.Annotation.MethodAnnotationStructure.MethodAnnotation" />
        <exclude name="Magento2.Annotation.MethodAnnotationStructure.NoCommentBlock" />
        <!-- This is not something we need anymore since code should be self documenting and typehints should be used -->
        <exclude name="Magento2.Commenting.ClassPropertyPHPDocFormatting.Missing" />
    </rule>
    <!-- Exclude all PSR2 rules in favor of PSR12 -->
    <rule ref="PSR2">
        <!--
            The PSR2 checks have been overruled by PSR12, for instance this one:
            Expected 0 spaces after opening bracket; newline found (PSR2.ControlStructures.ControlStructureSpacing.SpacingAfterOpenBrace)
            In PSR12 newlines are allowed after an opening brace.
        -->
        <exclude name="PSR2"/>
    </rule>

    <!-- Use PSR12 instead -->
    <rule ref="PSR12"/>
</ruleset>
